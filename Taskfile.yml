version: '3'


tasks:
  run-debug:
    cmds:
      - docker compose -f docker-compose.yml -f docker-compose.debug.yml up --build -d
    silent: true
  run-prod:
    cmds:
      - docker compose -f docker-compose.yml -f docker-compose.prod.yml up --build -d
    silent: true
  recreate-frontend:
    cmds:
      - docker compose build front
    silent: true
  run-frontend-local:
    cmds:
      - cd front && npm run dev
  recreate-backend-debug:
    cmds:
      - docker compose -f docker-compose.yml -f docker-compose.debug.yml up search --build -d
    silent: true
  recreate-backend-prod:
    cmds:
      - docker compose -f docker-compose.yml -f docker-compose.prod.yml up search --build -d
    silent: true
  down-all-delete-search_db:
    cmds:
      - docker compose down
      - rm -r ./search_database/.data
  down-all:
    cmd: docker compose down